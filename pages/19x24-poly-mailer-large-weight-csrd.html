<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSRD Weight Data: 19x24 Poly Mailer (Large) (19x24x0.1 in) - Compliance Code & Fees</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üì¶</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        slate: {
                            850: '#1e293b',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom scrollbar for clean look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 font-sans min-h-screen flex flex-col items-center py-10 px-4">

    <div class="bg-amber-50 border-b border-amber-100 text-amber-800 text-sm py-2 px-4 text-center">
        ‚ö†Ô∏è **Deadline Warning:** You must file your 2026 Planned Volumes by December 31st.
    </div>

    <main class="w-full max-w-2xl bg-white shadow-lg rounded-xl border border-slate-200 overflow-hidden">
        
        <!-- Header -->
        <header class="bg-slate-850 text-white p-6 border-b border-slate-700">
            <div class="flex flex-col sm:flex-row justify-between items-center mb-4">
                <nav class="flex items-center space-x-4 text-sm font-medium mb-2 sm:mb-0">
                    <a href="index.html" class="text-slate-300 hover:text-emerald-400 transition-colors">Browse All Sizes</a>
                    <a href="scanner.html" class="inline-flex items-center px-3 py-1.5 bg-emerald-600 text-white hover:bg-emerald-700 transition-colors rounded-md shadow-sm">
                        ‚ú® AI Invoice Scanner
                        <span class="ml-2 inline-flex items-center rounded-full bg-yellow-400 px-2 py-0.5 text-xs font-medium text-yellow-900">New</span>
                    </a>
                </nav>
                <a href="https://forms.gle/9tN5joJShbtxsqLQ7" target="_blank" rel="noopener noreferrer" class="inline-flex items-center px-3 py-1.5 border border-slate-300 text-sm font-medium rounded-md text-slate-700 bg-white hover:bg-slate-50 transition-colors shadow-sm">
                    ‚ûï Add Missing Box
                </a>
            </div>
            <!-- Breadcrumbs -->
            <nav class="text-xs text-slate-400 mb-4 font-mono">
                <a href="index.html" class="hover:text-emerald-400 transition-colors">Home</a> &gt; 
                <a href="#" class="hover:text-emerald-400 transition-colors capitalize">poly</a> &gt; 
                <span class="text-white">19x24 Poly Mailer (Large)</span>
            </nav>

            <h1 class="text-2xl md:text-3xl font-bold tracking-tight">Open Packaging Weight Calculator</h1>
            <div class="flex items-center gap-2 mt-2">
                <span class="bg-emerald-500 text-slate-900 text-xs font-bold px-2 py-0.5 rounded">CSRD & EPR READY</span>
                <p class="text-slate-300 text-sm font-medium">Get instant compliance data for standard shipping packaging.</p>
            </div>
        </header>

        <div class="p-6 md:p-8 space-y-8">
            
            <!-- Input Section -->
            <section class="space-y-6">
                <h2 class="text-lg font-semibold text-slate-800 border-b border-slate-100 pb-2">Packaging Details</h2>
                
                <!-- Box Type -->
                <div>
                    <label for="boxType" class="block text-sm font-medium text-slate-600 mb-1">Packaging Type</label>
                    <div class="relative">
                        <select id="boxType" class="w-full bg-slate-50 border border-slate-300 text-slate-900 text-sm rounded-lg focus:ring-emerald-500 focus:border-emerald-500 block p-2.5 appearance-none">
                            <option value="single_wall" data-type="box" data-mat="PAP 20" data-gsm="450" data-recycled="70% (Industry Avg)" data-wall="single" >Standard Shipping Box (Single Wall) - Corrugated</option>
                            <option value="double_wall" data-type="box" data-mat="PAP 20" data-gsm="750" data-recycled="70% (Industry Avg)" data-wall="double" >Heavy Duty Box (Double Wall) - Corrugated</option>
                            <option value="kraft_mailer" data-type="envelope" data-mat="PAP 21" data-gsm="250" data-recycled="100% (Industry Avg)" data-wall="n/a" >Kraft Mailer Envelope - Paperboard</option>
                            <option value="poly_mailer" data-type="envelope" data-mat="LDPE 4" data-gsm="120" data-recycled="30% (Industry Avg)" data-wall="n/a" selected>Poly Mailer Bag - LDPE</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-slate-700">
                            <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                        </div>
                    </div>
                </div>

                <!-- Dimensions & Units -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    
                    <!-- Dimensions -->
                    <div class="space-y-3">
                        <label class="block text-sm font-medium text-slate-600">Dimensions</label>
                        <div class="flex space-x-2">
                            <div class="flex-1">
                                <input type="number" id="length" placeholder="L" value="19" class="w-full bg-slate-50 border border-slate-300 p-2.5 rounded-lg focus:ring-emerald-500 focus:border-emerald-500 text-sm" min="0" step="0.1">
                                <span class="text-xs text-slate-400 ml-1">Length</span>
                            </div>
                            <div class="flex-1">
                                <input type="number" id="width" placeholder="W" value="24" class="w-full bg-slate-50 border border-slate-300 p-2.5 rounded-lg focus:ring-emerald-500 focus:border-emerald-500 text-sm" min="0" step="0.1">
                                <span class="text-xs text-slate-400 ml-1">Width</span>
                            </div>
                            <div class="flex-1 transition-opacity duration-300" id="heightContainer">
                                <input type="number" id="height" placeholder="H" value="0.1" class="w-full bg-slate-50 border border-slate-300 p-2.5 rounded-lg focus:ring-emerald-500 focus:border-emerald-500 text-sm" min="0" step="0.1">
                                <span class="text-xs text-slate-400 ml-1">Height</span>
                            </div>
                        </div>
                    </div>

                    <!-- Unit Toggle -->
                    <div>
                        <label class="block text-sm font-medium text-slate-600 mb-3">Measurement Unit</label>
                        <div class="flex items-center space-x-4 bg-slate-100 p-1 rounded-lg w-fit">
                            <button id="btn-cm" class="px-4 py-1.5 text-sm font-medium rounded-md text-slate-500 hover:text-slate-700 transition-all">cm</button>
                            <button id="btn-in" class="px-4 py-1.5 text-sm font-medium rounded-md bg-white shadow-sm text-slate-800 transition-all">inches</button>
                        </div>
                    </div>
                </div>

                <!-- Forecast Qty -->
                <div class="pt-4 border-t border-slate-100">
                    <label for="forecastQty" class="block text-sm font-medium text-slate-600 mb-1">Forecasted Annual Volume (Qty)</label>
                    <input type="number" id="forecastQty" placeholder="e.g., 500" value="1" class="w-full bg-slate-50 border border-slate-300 p-2.5 rounded-lg focus:ring-emerald-500 focus:border-emerald-500 text-sm" min="1">
                </div>

            </section>

            <!-- Output Section -->
            <section id="outputSection" class="bg-slate-850 rounded-xl p-6 text-white relative transition-all duration-300">
                <!-- Overlay for Disabled State (Hidden by default since we pre-fill) -->
                <div id="outputOverlay" class="absolute inset-0 z-10 hidden"></div>

                <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
                    <div>
                        <h3 class="text-emerald-400 text-xs font-bold uppercase tracking-wider mb-1">Estimated Weight</h3>
                        <div class="flex items-baseline gap-2">
                            <span id="weightGrams" class="text-4xl font-bold">71</span>
                            <span class="text-xl text-slate-400">g</span>
                            <span class="text-slate-500 text-sm mx-2">/</span>
                            <span id="weightKg" class="text-xl text-slate-300">0.071</span>
                            <span class="text-slate-400 text-sm">kg</span>
                        </div>
                    </div>
                    <button id="copyBtn" class="flex items-center gap-2 bg-emerald-600 hover:bg-emerald-500 text-white text-sm font-medium px-4 py-2 rounded-lg transition-colors shadow-lg shadow-emerald-900/20">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" />
                        </svg>
                        Copy Data
                    </button>
                </div>

                <div class="grid grid-cols-2 gap-4 border-t border-slate-700 pt-4">
                    <div>
                        <p class="text-slate-400 text-xs mb-1">Material Code</p>
                        <p id="materialCode" class="font-mono text-lg text-white font-semibold">---</p>
                    </div>
                    <div>
                        <p class="text-slate-400 text-xs mb-1">Recycled Content (Est.)</p>
                        <p id="recycledContent" class="text-lg text-white">---</p>
                    </div>
                </div>
            </section>

            <!-- Liability Report Section -->
            <section id="liabilitySection" class="bg-amber-50 rounded-xl p-6 border border-amber-200">
                <h3 class="text-amber-800 text-sm font-bold uppercase tracking-wider mb-4">Your 2026 Liability Report</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <p class="text-amber-600 text-xs mb-1">Total Paper Weight</p>
                        <p id="totalPaper" class="text-2xl font-bold text-amber-900">0.0 kg</p>
                    </div>
                    <div>
                        <p class="text-amber-600 text-xs mb-1">Total Plastic Weight</p>
                        <p id="totalPlastic" class="text-2xl font-bold text-amber-900">0.0 kg</p>
                    </div>
                </div>
                
                <div class="mt-4 pt-4 border-t border-amber-200 flex items-center justify-between">
                    <span class="text-xs text-amber-700 italic">Copy these values directly to LUCID.</span>
                </div>
            </section>

            <div class="text-xs text-slate-500 mt-2 text-center">
                ‚ö° Used by 500+ merchants this week to check compliance.
            </div>

            <div class="bg-white border border-slate-200 mt-8 p-6 rounded-xl text-center shadow-sm">
                <h3 class="text-lg font-bold text-slate-900 mb-2">LUCID Audit Risk? Don't guess your weights.</h3>
                <p class="text-slate-500 text-sm mb-4">Get the Shopify App that auto-syncs your 2025 Order History for your EPR report.</p>
                <form id="leadGenForm" class="flex gap-2 max-w-sm mx-auto">
                    <input type="email" name="email" placeholder="Enter your email" required class="flex-1 bg-slate-50 border border-slate-300 rounded px-3 py-2 text-slate-900 text-sm focus:outline-none focus:border-emerald-500">
                    <button type="submit" class="bg-slate-900 hover:bg-slate-800 text-white px-4 py-2 rounded text-sm font-medium transition">Join Early Access</button>
                </form>
                <p id="leadGenSuccess" class="hidden text-emerald-600 text-xs mt-2">Thanks! We'll notify you.</p>
            </div>

        </div>
        
    </main>

    <footer class="bg-slate-50 border-t border-slate-200 mt-12 py-8 w-full">
        <div class="max-w-5xl mx-auto px-4 text-center text-slate-500 text-sm">
            <p>&copy; 2025 Open Packaging Data Project. All rights reserved.</p>
            <p class="mt-2">Data provided for estimation purposes only. Not for legal trade use.</p>
            <p class="text-xs text-slate-400 mt-2">Can't find your box? Submit details <a href="https://forms.gle/9tN5joJShbtxsqLQ7" target="_blank" rel="noopener noreferrer" class="text-emerald-600 hover:text-emerald-800 underline">here</a>.</p>
            <div class="mt-4 flex justify-center gap-4">
                <a href="https://github.com/1701as/packaging-calculator" class="hover:text-slate-700 underline transition-colors">Open Source Code</a>
                <span>‚Ä¢</span>
                <a href="mailto:admin@tare.fyi" class="hover:text-slate-700 underline transition-colors">Feedback</a>
            </div>
        </div>
    </footer>

    <!-- Notification Toast -->
    <div id="toast" class="fixed bottom-4 right-4 bg-slate-800 text-white px-4 py-2 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-emerald-400" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
        </svg>
        <span>Copied to clipboard!</span>
    </div>

    <script>
        // DOM Elements
        const boxTypeSelect = document.getElementById('boxType');
        const lengthInput = document.getElementById('length');
        const widthInput = document.getElementById('width');
        const heightInput = document.getElementById('height');
        const heightContainer = document.getElementById('heightContainer');
        const forecastQtyInput = document.getElementById('forecastQty');
        
        const btnCm = document.getElementById('btn-cm');
        const btnIn = document.getElementById('btn-in');
        
        const outputSection = document.getElementById('outputSection');
        const outputOverlay = document.getElementById('outputOverlay');
        const weightGramsEl = document.getElementById('weightGrams');
        const weightKgEl = document.getElementById('weightKg');
        const materialCodeEl = document.getElementById('materialCode');
        const recycledContentEl = document.getElementById('recycledContent');
        
        const totalPaperEl = document.getElementById('totalPaper');
        const totalPlasticEl = document.getElementById('totalPlastic');

        const copyBtn = document.getElementById('copyBtn');
        const toast = document.getElementById('toast');

        // State - currentUnit is set by the template for initial load
        let currentUnit = 'in'; 

        // Constants
        const CM_TO_M = 0.01;
        const IN_TO_M = 0.0254;

        // Initialization
        function init() {
            addListeners();
            // Ensure UI matches the initial unit state
            setUnit(currentUnit); // Call setUnit once to configure buttons correctly
            
            handleBoxTypeChange(); // Ensure height box visibility is correct
            calculate(); // Run to populate material codes etc based on the pre-selected option
        }

        function addListeners() {
            // Inputs
            [lengthInput, widthInput, heightInput, forecastQtyInput].forEach(input => {
                input.addEventListener('input', calculate);
            });

            // Dropdown
            boxTypeSelect.addEventListener('change', (e) => {
                handleBoxTypeChange();
                calculate();
            });

            // Unit Toggles
            btnCm.addEventListener('click', () => setUnit('cm'));
            btnIn.addEventListener('click', () => setUnit('in'));

            // Copy
            copyBtn.addEventListener('click', copyToClipboard);
        }

        function setUnit(unit) {
            currentUnit = unit;
            if (unit === 'cm') {
                btnCm.classList.remove('text-slate-500', 'hover:text-slate-700');
                btnCm.classList.add('bg-white', 'shadow-sm', 'text-slate-800');
                
                btnIn.classList.remove('bg-white', 'shadow-sm', 'text-slate-800');
                btnIn.classList.add('text-slate-500', 'hover:text-slate-700');
            } else {
                btnIn.classList.remove('text-slate-500', 'hover:text-slate-700');
                btnIn.classList.add('bg-white', 'shadow-sm', 'text-slate-800');
                
                btnCm.classList.remove('bg-white', 'shadow-sm', 'text-slate-800');
                btnCm.classList.add('text-slate-500', 'hover:text-slate-700');
            }
            calculate();
        }

        function handleBoxTypeChange() {
            const selectedOption = boxTypeSelect.options[boxTypeSelect.selectedIndex];
            const type = selectedOption.dataset.type;

            if (type === 'envelope') {
                heightInput.value = '';
                heightInput.disabled = true;
                heightContainer.style.opacity = '0.3';
            } else {
                heightInput.disabled = false;
                heightContainer.style.opacity = '1';
            }
        }

        function calculate() {
            const selectedOption = boxTypeSelect.options[boxTypeSelect.selectedIndex];
            const type = selectedOption.dataset.type; // 'box' or 'envelope'
            const gsm = parseFloat(selectedOption.dataset.gsm);
            const matCode = selectedOption.dataset.mat;
            const recycled = selectedOption.dataset.recycled;

            let l = parseFloat(lengthInput.value);
            let w = parseFloat(widthInput.value);
            let h = parseFloat(heightInput.value);
            let qty = parseInt(forecastQtyInput.value) || 1;

            // Basic Validation
            const isBox = type === 'box';
            if (!l || !w || (isBox && !h && h !== 0)) { 
                 if (isBox && isNaN(h)) {
                    // check if missing H for box
                 }
            }

            // If inputs are empty/invalid
            if (isNaN(l) || isNaN(w) || (isBox && isNaN(h))) {
                toggleOutput(false);
                return;
            }

            // Default H to 0 if not applicable
            if (!isBox) h = 0;

            // Convert to Meters
            const factor = currentUnit === 'cm' ? CM_TO_M : IN_TO_M;
            const l_m = l * factor;
            const w_m = w * factor;
            const h_m = h * factor;

            // Surface Area Logic
            let area_m2 = 0;
            if (type === 'box') {
                const wallType = selectedOption.dataset.wall;
                const baseArea = 2 * ((l_m * w_m) + (l_m * h_m) + (w_m * h_m));
                if (wallType === 'single') {
                    area_m2 = baseArea * 1.25; 
                } else if (wallType === 'double') {
                    area_m2 = baseArea * 1.35; 
                }
            } else { // type is 'envelope'
                if (selectedOption.value === 'poly_mailer') {
                    area_m2 = (2 * l_m * w_m); 
                } else if (selectedOption.value === 'kraft_mailer') {
                    area_m2 = (2 * l_m * w_m) * 1.10; 
                }
            }

            // Weight Calculation
            const weight_g = area_m2 * gsm;
            const weight_kg = weight_g / 1000;

            // Liability Calculation
            const total_weight_kg = weight_kg * qty;
            
            let paper_kg = 0;
            let plastic_kg = 0;

            if (matCode.startsWith('PAP')) {
                paper_kg = total_weight_kg;
            } else if (matCode.startsWith('LDPE')) {
                plastic_kg = total_weight_kg;
            }

            // Update UI
            updateOutput(weight_g, weight_kg, matCode, recycled, paper_kg, plastic_kg);
            toggleOutput(true);
        }

        function toggleOutput(active) {
            if (active) {
                outputSection.classList.remove('opacity-50', 'cursor-not-allowed');
                outputOverlay.classList.add('hidden');
                document.getElementById('liabilitySection').classList.remove('opacity-50', 'cursor-not-allowed');
            } else {
                outputSection.classList.add('opacity-50', 'cursor-not-allowed');
                outputOverlay.classList.remove('hidden');
                document.getElementById('liabilitySection').classList.add('opacity-50', 'cursor-not-allowed');
                
                weightGramsEl.textContent = '0';
                weightKgEl.textContent = '0.00';
                materialCodeEl.textContent = '---';
                recycledContentEl.textContent = '---';
                totalPaperEl.textContent = '0.0 kg';
                totalPlasticEl.textContent = '0.0 kg';
            }
        }

        function updateOutput(g, kg, code, rec, paper, plastic) {
            weightGramsEl.textContent = Math.round(g).toLocaleString();
            weightKgEl.textContent = kg.toFixed(3);
            materialCodeEl.textContent = code;
            recycledContentEl.textContent = rec;

            totalPaperEl.textContent = paper > 0 ? paper.toFixed(2) + ' kg' : '0.0 kg';
            totalPlasticEl.textContent = plastic > 0 ? plastic.toFixed(2) + ' kg' : '0.0 kg';

            // Visual dimming
            if (paper > 0) {
                totalPaperEl.classList.remove('text-amber-300');
                totalPaperEl.classList.add('text-amber-900');
                totalPlasticEl.classList.add('text-amber-300');
                totalPlasticEl.classList.remove('text-amber-900');
            } else if (plastic > 0) {
                totalPlasticEl.classList.remove('text-amber-300');
                totalPlasticEl.classList.add('text-amber-900');
                totalPaperEl.classList.add('text-amber-300');
                totalPaperEl.classList.remove('text-amber-900');
            } else {
                 // Reset
                totalPaperEl.classList.add('text-amber-900');
                totalPlasticEl.classList.add('text-amber-900');
            }
        }

        function copyToClipboard() {
            const weightG = weightGramsEl.textContent;
            const weightKg = weightKgEl.textContent;
            const mat = materialCodeEl.textContent;
            
            // Get totals
            const p = totalPaperEl.textContent;
            const pl = totalPlasticEl.textContent;
            
            const textToCopy = `Unit Weight: ${weightG}g\tMaterial: ${mat}\tTotal Paper: ${p}\tTotal Plastic: ${pl}`;

            navigator.clipboard.writeText(textToCopy).then(() => {
                showToast();
            });
        }

        function showToast() {
            toast.classList.remove('translate-y-20', 'opacity-0');
            setTimeout(() => {
                toast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }

        // Lead Gen Form Logic
        const API_URL = "https://tare-scanner-api.20051701as.workers.dev";
        const leadGenForm = document.getElementById('leadGenForm');
        
        if (leadGenForm) {
            leadGenForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const email = e.target.email.value;
                const btn = e.target.querySelector('button');
                const successMsg = document.getElementById('leadGenSuccess');

                btn.disabled = true;
                const originalText = btn.innerText;
                btn.innerText = "...";

                const formData = new FormData();
                formData.append('email', email);

                try {
                    await fetch(API_URL, { method: 'POST', body: formData });
                    e.target.reset();
                    successMsg.classList.remove('hidden');
                    btn.innerText = "Sent!";
                    setTimeout(() => {
                        btn.innerText = originalText;
                        btn.disabled = false;
                    }, 3000);
                } catch (err) {
                    console.error(err);
                    btn.innerText = "Error";
                    btn.disabled = false;
                }
            });
        }

        // Run
        init();

    </script>
</body>
</html>